import{_ as se}from"./VPage.vue_vue_type_script_setup_true_lang-D3aXKuuB.js";import{s as ae}from"./index-DHJ_47cS.js";import{_ as oe}from"./ImagePicker.vue_vue_type_script_setup_true_lang-BJYwXjIX.js";import{s as ne}from"./index-CLVt6LG3.js";import{s as ie,_ as de}from"./Deleter.vue_vue_type_script_setup_true_lang-DS0wtoW3.js";import{s as ue}from"./index-CE-NW1yC.js";import{s as re}from"./index-ZguDolrA.js";import{s as me}from"./index-CZEEhluR.js";import{$ as U,_ as pe}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-sh5mCXpp.js";import{d as ve,u as fe,v as ce,h as xe,r as m,p as ge,x as z,i as be,c,w as I,a as t,k as v,l as x,j as a,q as r,b as f,t as g,z as N,s as ye,e as P,F as B,o as d,m as ke,n as Ve,y as _e}from"./index-BernQVxA.js";import"./index-CvyUCB5w.js";import"./index-CDuATX9l.js";const we={class:"flex justify-end gap-3"},Me={class:"grid md:grid-cols-6 gap-5"},Te={class:"flex flex-col gap-1 md:col-span-2"},Le={class:"flex flex-col gap-1 md:col-span-2"},Ue={class:"flex flex-col gap-1 md:col-span-2"},Ie={class:"flex flex-col gap-1 md:col-span-2"},Se={class:"flex flex-col gap-1 md:col-span-2"},Ce={class:"flex flex-col gap-1 md:col-span-2"},$e={class:"flex flex-col gap-1 h-60 md:h-auto md:row-span-2 md:col-span-2 lg:col-span-2"},De={class:"flex flex-col gap-1 h-60 md:h-auto md:row-span-2 md:col-span-2 lg:col-span-2"},Fe={class:"flex flex-col gap-1 md:col-span-2"},je={class:"flex flex-col gap-1 md:col-span-2"},Ee={class:"flex flex-col gap-1 md:col-span-2"},ze={class:"flex flex-col gap-1 md:col-span-2"},Ne={class:"text-sm font-medium"},Pe={key:0},Be={class:"flex flex-col gap-1 md:col-span-2"},Ge={class:"text-sm font-medium"},Oe={key:0},Re={class:"flex flex-col gap-1 md:col-span-2"},He={class:"flex flex-col gap-1 md:col-span-2"},Ae={class:"flex flex-col gap-1 md:col-span-2"},he={class:"flex flex-col gap-1 md:col-span-2"},qe={class:"text-sm font-medium"},Ye={class:"flex flex-col gap-1 md:col-span-2"},Je={class:"relative flex flex-col gap-1 md:col-span-2"},Ke={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},Qe={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},We={class:"md:col-span-6 px-2 py-2 mt-10 rounded-md border border-neutral-200 dark:border-neutral-800"},Xe={class:"mt-2 grid gap-4 grid-cols-[repeat(auto-fill,minmax(120px,1fr))]"},Ze=["onClick"],el=["src"],ll={class:"md:col-span-6 px-2 py-2 mt-10 rounded-md border border-neutral-200 dark:border-neutral-800"},tl={class:"flex items-center gap-2 justify-between"},sl={class:"flex items-center justify-center"},al={class:"mt-2 grid gap-2 md:grid-cols-2"},ol={class:"mt-4 grid gap-2"},nl={class:"text-sm"},il={class:"font-semibold"},dl={class:"flex items-center gap-2"},ul=["href"],Ml=ve({__name:"Event",async setup(rl){var D;let b,S;const G=ce(),_=fe(),y=(D=G.params.id)==null?void 0:D.toString(),{data:w,error:C,execute:O}=y?([b,S]=xe(()=>U(`events/${y}`).json()),b=await b,S(),b):{data:null,error:null},l=m(ge((w==null?void 0:w.value)??{})),R=m(l.value.bannerImage??""),p=m(l.value.gallery??[]);z(()=>l.value.title,o=>{o&&(l.value.slug=_e(o))},{immediate:!0});const k=m(!1),$=m();async function H(){ke(k,$);const{data:o,error:e}=y?await U(`events/${y}`).put({data:l.value}).json():await U("events").post({data:l.value}).json();Ve(k,$,e),o.value&&(l.value=o.value,_.add({severity:"success",summary:"Saved",life:3e3})),e.value&&_.add({severity:"error",summary:"Error",detail:e.value.message,life:6e3})}const A=be(()=>!l.value.title||!l.value.slug||!l.value.venue||!l.value.description||!l.value.status||!l.value.bannerImage||!l.value.startDate||!l.value.startTime||l.value.featured===void 0||l.value.featured===null),n=m({label:"",link:""}),h=()=>{var o;if(n.value.label&&n.value.link){if((o=l.value.socialMediaLinks)==null?void 0:o.find(i=>i.label===n.value.label||i.link===n.value.link)){_.add({severity:"warn",summary:"Duplicate link",life:5e3});return}l.value.socialMediaLinks=[...l.value.socialMediaLinks||[],n.value],n.value={label:"",link:""}}},q=o=>{var i;const e=o>0?1:void 0;l.value.socialMediaLinks=(i=l.value.socialMediaLinks)==null?void 0:i.splice(o,e)},M=m(!1);function Y(o){l.value&&(l.value.bannerImage=o.url,M.value=!0)}function J(){l.value&&(l.value.bannerImage=R.value,M.value=!1)}const K=o=>{p.value.includes(o.url)||(p.value=[...p.value,o.url])},Q=o=>{p.value=p.value.filter(e=>e!==o)};z(p,o=>{o&&o.length?l.value.gallery=o:l.value.gallery=null});const W=m(["Facebook","Instagram","LinkedIn","Pinterest","Snapchat","TikTok","Twitter","YouTube"]);return(o,e)=>{const i=ye,X=de,Z=pe,u=me,T=re,F=ue,V=ie,ee=ne,j=oe,le=ae,te=se;return d(),c(te,{header:l.value.title??"Event"},{actions:I(()=>[t("div",we,[a(i,{onClick:H,loading:k.value,label:"Save",disabled:k.value||A.value,icon:"pi pi-save"},null,8,["loading","disabled"]),l.value.id?(d(),c(X,{key:0,onDone:e[0]||(e[0]=L=>o.$router.push({name:"events"})),id:l.value.id,route:"events"},null,8,["id"])):v("",!0)])]),default:I(()=>{var L;return[t("div",null,[x(C)?(d(),c(Z,{key:0,error:x(C),"should-retry":"",onRetry:x(O)},null,8,["error","onRetry"])):v("",!0),t("div",null,[t("div",Me,[t("div",Te,[e[21]||(e[21]=t("label",{class:"text-sm font-medium"},[r(" Title "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(u,{modelValue:l.value.title,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.title=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Le,[e[22]||(e[22]=t("label",{class:"text-sm font-medium"},[r(" Slug "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(u,{modelValue:l.value.slug,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.slug=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ue,[e[23]||(e[23]=t("label",{class:"text-sm font-medium"},[r(" Featured "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(T,{modelValue:l.value.featured,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.featured=s),options:[!0,!1],fluid:""},null,8,["modelValue"])]),t("div",Ie,[e[24]||(e[24]=t("label",{class:"text-sm font-medium"},[r(" Status "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(T,{modelValue:l.value.status,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.status=s),options:["UPCOMING","ONGOING","PAST","CANCELLED"],fluid:""},null,8,["modelValue"])]),t("div",Se,[e[25]||(e[25]=t("label",{class:"text-sm font-medium"},[r(" Venue "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(u,{modelValue:l.value.venue,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.venue=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ce,[e[26]||(e[26]=t("label",{class:"text-sm font-medium"},"Event Link (if online)",-1)),a(u,{modelValue:l.value.eventLink,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.eventLink=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",$e,[e[27]||(e[27]=t("label",{class:"text-sm font-medium"},[r(" Description "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(F,{modelValue:l.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.description=s),modelModifiers:{trim:!0},fluid:"",class:"resize-none h-full"},null,8,["modelValue"])]),t("div",De,[e[28]||(e[28]=t("label",{class:"text-sm font-medium"},"How to register",-1)),a(F,{modelValue:l.value.howToRegister,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.howToRegister=s),modelModifiers:{trim:!0},fluid:"",class:"resize-none h-full"},null,8,["modelValue"])]),t("div",Fe,[e[29]||(e[29]=t("label",{class:"text-sm font-medium"},"Registration Link",-1)),a(u,{modelValue:l.value.registrationLink,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.registrationLink=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",je,[e[30]||(e[30]=t("label",{class:"text-sm font-medium"},[r(" Start Date "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(V,{modelValue:l.value.startDate,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.startDate=s),dateFormat:"M dd, yy"},null,8,["modelValue"])]),t("div",Ee,[e[31]||(e[31]=t("label",{class:"text-sm font-medium"}," End Date ",-1)),a(V,{modelValue:l.value.endDate,"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.endDate=s),dateFormat:"M dd, yy"},null,8,["modelValue"])]),t("div",ze,[t("label",Ne,[e[32]||(e[32]=r(" Start Time ")),l.value.startTime?(d(),f("span",Pe,g(x(N)(l.value.startTime,"HH:mm aa")),1)):v("",!0),e[33]||(e[33]=t("span",{class:"text-red-500 font-medium"},"*",-1))]),a(V,{modelValue:l.value.startTime,"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.startTime=s),timeOnly:"",hourFormat:"12"},null,8,["modelValue"])]),t("div",Be,[t("label",Ge,[e[34]||(e[34]=r(" End Time ")),l.value.endTime?(d(),f("span",Oe,g(x(N)(l.value.endTime,"HH:mm aa")),1)):v("",!0)]),a(V,{modelValue:l.value.endTime,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.endTime=s),timeOnly:"",hourFormat:"12"},null,8,["modelValue"])]),t("div",Re,[e[35]||(e[35]=t("label",{class:"text-sm font-medium"}," Address ",-1)),a(u,{modelValue:l.value.address,"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.address=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",He,[e[36]||(e[36]=t("label",{class:"text-sm font-medium"}," City ",-1)),a(u,{modelValue:l.value.city,"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.city=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ae,[e[37]||(e[37]=t("label",{class:"text-sm font-medium"}," Country ",-1)),a(u,{modelValue:l.value.country,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.country=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",he,[t("label",qe," Price ("+g(l.value.currency)+")",1),a(ee,{modelValue:l.value.price,"onUpdate:modelValue":e[17]||(e[17]=s=>l.value.price=s),"max-fraction-digits":2,fluid:""},null,8,["modelValue"])]),t("div",Ye,[e[38]||(e[38]=t("label",{class:"text-sm font-medium"}," Currency ",-1)),a(u,{modelValue:l.value.currency,"onUpdate:modelValue":e[18]||(e[18]=s=>l.value.currency=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Je,[e[39]||(e[39]=t("label",{class:"text-sm font-medium"},[r(" Banner Image "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(j,{onSelect:Y}),t("div",Ke,[t("div",Qe,[(L=l.value)!=null&&L.bannerImage?(d(),c(le,{key:0,src:l.value.bannerImage,fluid:"",preview:"",class:"w-full h-full","image-class":"w-full h-full object-cover"},null,8,["src"])):v("",!0)]),M.value?(d(),c(i,{key:0,onClick:J,label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):v("",!0)])]),t("div",We,[e[41]||(e[41]=t("label",{class:"text-sm font-medium"}," Event Gallery ",-1)),t("div",Xe,[(d(!0),f(B,null,P(p.value,s=>(d(),f("div",{key:s,class:"relative h-40 rounded-md overflow-hidden bg-neutral-200 dark:bg-neutral-800"},[t("div",{onClick:E=>Q(s),class:"absolute cursor-pointer left-0 top-0 w-full h-full transition-all group hover:bg-black/40 grid place-content-center"},[a(i,{severity:"danger",size:"small",icon:"pi pi-trash",class:"transition-all opacity-0 translate-y-10 group-hover:translate-y-0 group-hover:opacity-100"})],8,Ze),t("img",{src:s,class:"w-full h-full object-cover"},null,8,el)]))),128)),a(j,{onSelect:K},{default:I(()=>e[40]||(e[40]=[t("div",{class:"border-2 border-neutral-400 dark:border-neutral-700 border-dashed rounded-md h-40 flex items-center justify-center hover:bg-neutral-200 dark:hover:bg-neutral-800 cursor-pointer"},[t("i",{class:"pi pi-plus text-2xl text-neutral-400 dark:text-neutral-600"})],-1)])),_:1})])]),t("div",ll,[t("div",tl,[e[42]||(e[42]=t("label",{class:"text-sm font-medium"}," Social Media Links ",-1)),t("div",sl,[a(i,{onClick:h,disabled:!n.value.label||!n.value.link,size:"small",icon:"pi pi-plus",rounded:""},null,8,["disabled"])])]),t("div",al,[t("div",null,[a(T,{options:W.value,modelValue:n.value.label,"onUpdate:modelValue":e[19]||(e[19]=s=>n.value.label=s),placeholder:"Platform",size:"small",fluid:""},null,8,["options","modelValue"])]),t("div",null,[a(u,{modelValue:n.value.link,"onUpdate:modelValue":e[20]||(e[20]=s=>n.value.link=s),placeholder:"href e.g. www.facebook.com/event",size:"small",fluid:""},null,8,["modelValue"])])]),t("div",ol,[(d(!0),f(B,null,P(l.value.socialMediaLinks,(s,E)=>(d(),f("div",{key:s.link,class:"flex items-center gap-2 justify-between flex-wrap border border-neutral-200 dark:border-neutral-800 rounded-md p-2"},[t("div",nl,[t("p",il,g(s.label),1),t("div",dl,[t("p",null,g(s.link),1),t("a",{href:s.link,target:"_blank",rel:"noopener noreferrer"},e[43]||(e[43]=[t("span",{class:"pi pi-external-link text-blue-800 hover:underline",style:{"font-weight":"600","font-size":"0.8rem"}},null,-1)]),8,ul)])]),a(i,{onClick:ml=>q(E),icon:"pi pi-trash",rounded:"",text:"",severity:"danger"},null,8,["onClick"])]))),128))])])])])])]}),_:1},8,["header"])}}});export{Ml as default};
