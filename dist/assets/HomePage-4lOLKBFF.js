import{_ as M}from"./VPage.vue_vue_type_script_setup_true_lang-K2AxGuuA.js";import{s as T}from"./index-XKGxpEsQ.js";import{s as R}from"./index-BP83Aqle.js";import{_ as G}from"./ImagePicker.vue_vue_type_script_setup_true_lang-CtnXt56_.js";import{d as J,u as K,h as L,r as g,i as O,c as i,w as H,a as o,j as u,b as Q,k as d,l as P,s as W,o as l,m as X,n as Y}from"./index-WTmT20yY.js";import{_ as Z,$ as _}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B43nygGB.js";import"./index-BMhA5Ota.js";import"./index-DYVb8g_1.js";const ee={class:"flex justify-end mt-6"},te={key:0},oe={class:"grid md:grid-cols-3 gap-x-5 gap-y-16"},ae={class:"relative grid gap-1"},se={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},ne={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},le={class:"relative grid gap-1"},re={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},ie={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},ue={class:"relative grid gap-1"},de={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},me={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},ce={class:"mt-20"},ge={class:"grid gap-1"},ve={class:"mt-4 grid gap-1"},Be=J({__name:"HomePage",async setup(pe){var k,B,x,F,$,V,S;let v,b;const h=K(),{data:y,error:q}=([v,b]=L(()=>_("pages?where=title,home").json()),v=await v,b(),v),t=g(((k=y.value)==null?void 0:k[0])??{title:"home",content:{introduction:"",noBgImage:"",heroImage1:"",heroImage2:"",aboutDiceFoundation:""}}),N=g({noBgImage:((x=(B=t.value)==null?void 0:B.content)==null?void 0:x.noBgImage)??"",heroImage1:(($=(F=t.value)==null?void 0:F.content)==null?void 0:$.heroImage1)??"",heroImage2:((S=(V=t.value)==null?void 0:V.content)==null?void 0:S.heroImage2)??""}),n=g({noBgImage:!1,heroImage1:!1,heroImage2:!1}),p=g(!1),w=g(null),U=async()=>{X(p,w);const{data:s,error:e}=t.value.id?await _(`pages/${t.value.id}`).put({data:t.value}).json():await _("pages").post({data:t.value}).json();if(Y(p,w,e),s.value){h.add({severity:"success",summary:"Success",detail:"Saved",life:3e3}),n.value.noBgImage=!1,n.value.heroImage1=!1,n.value.heroImage2=!1;return}e.value&&h.add({severity:"error",summary:"Error",detail:e.value.message,life:3e3})},A=O(()=>{var s,e,r,m,c;return!((s=t.value.content)!=null&&s.noBgImage)||!((e=t.value.content)!=null&&e.introduction)||!((r=t.value.content)!=null&&r.heroImage1)||!((m=t.value.content)!=null&&m.heroImage2)||!((c=t.value.content)!=null&&c.aboutDiceFoundation)});function f(s,e){t.value.content&&(t.value.content[e]=s.url,n.value[e]=!0)}function I(s){t.value.content&&(t.value.content[s]=N.value[s],n.value[s]=!1)}return(s,e)=>{const r=W,m=G,c=R,j=T,E=M;return l(),i(E,{header:"Home Page"},{actions:H(()=>[o("div",ee,[u(r,{onClick:U,loading:p.value,label:"Save",icon:"pi pi-save",disabled:p.value||A.value},null,8,["loading","disabled"])])]),default:H(()=>{var C,z,D;return[o("div",null,[u(Z,{error:P(q),shouldRetry:""},null,8,["error"]),P(y)?(l(),Q("div",te,[o("div",oe,[o("div",ae,[e[8]||(e[8]=o("label",{class:"text-sm font-medium"},"Hero image 1 (no background)",-1)),u(m,{onSelect:e[0]||(e[0]=a=>f(a,"noBgImage"))}),o("div",se,[o("div",ne,[(C=t.value.content)!=null&&C.noBgImage?(l(),i(c,{key:0,src:t.value.content.noBgImage,preview:""},null,8,["src"])):d("",!0)]),n.value.noBgImage?(l(),i(r,{key:0,onClick:e[1]||(e[1]=a=>I("noBgImage")),label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):d("",!0)])]),o("div",le,[e[9]||(e[9]=o("label",{class:"text-sm font-medium"},"Hero image 2",-1)),u(m,{onSelect:e[2]||(e[2]=a=>f(a,"heroImage1"))}),o("div",re,[o("div",ie,[(z=t.value.content)!=null&&z.heroImage1?(l(),i(c,{key:0,src:t.value.content.heroImage1,preview:""},null,8,["src"])):d("",!0)]),n.value.heroImage1?(l(),i(r,{key:0,onClick:e[3]||(e[3]=a=>I("heroImage1")),label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):d("",!0)])]),o("div",ue,[e[10]||(e[10]=o("label",{class:"text-sm font-medium"},"Hero image 3",-1)),u(m,{onSelect:e[4]||(e[4]=a=>f(a,"heroImage2"))}),o("div",de,[o("div",me,[(D=t.value.content)!=null&&D.heroImage2?(l(),i(c,{key:0,src:t.value.content.heroImage2,preview:""},null,8,["src"])):d("",!0)]),n.value.heroImage2?(l(),i(r,{key:0,onClick:e[5]||(e[5]=a=>I("heroImage2")),label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):d("",!0)])])]),o("div",ce,[o("div",ge,[e[11]||(e[11]=o("label",{class:"text-sm font-medium"},"Introduction",-1)),u(j,{modelValue:t.value.content.introduction,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.content.introduction=a),modelModifiers:{trim:!0},rows:"4",fluid:"",class:"resize-none"},null,8,["modelValue"])]),o("div",ve,[e[12]||(e[12]=o("label",{class:"text-sm font-medium"},"About Dice Foundation",-1)),u(j,{modelValue:t.value.content.aboutDiceFoundation,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.content.aboutDiceFoundation=a),modelModifiers:{trim:!0},rows:"10",fluid:"",class:"resize-none"},null,8,["modelValue"])])])])):d("",!0)])]}),_:1})}}});export{Be as default};
