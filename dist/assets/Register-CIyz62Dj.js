import{s as x}from"./index-LlkunJPm.js";import{d as k,r as i,i as y,aT as $,u as C,b as u,j as t,w as m,a,k as N,s as R,p as h,aW as B,o as p}from"./index-WTmT20yY.js";import{s as M}from"./index-BTd6UqBt.js";import{s as T}from"./index-DbUABEl7.js";import{_ as j,a as E}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B43nygGB.js";import"./index-DYVb8g_1.js";import"./index-BMhA5Ota.js";const P={class:"w-dvw h-full grid place-content-center"},U={class:"grid gap-4"},S={class:"grid gap-1"},I={class:"grid gap-1"},W={class:"grid gap-1"},q={key:0,class:"text-red-500"},z={class:"flex justify-end mt-2"},O=k({__name:"Register",setup(A){const s=i({}),c=y(()=>!s.value.name||s.value.name.length<2||!s.value.email||!s.value.password||s.value.password.length<6),v=B();$();const f=C(),l=i(),r=i();async function g(){r.value=void 0,l.value=!0;const{data:n,error:e}=await E("/auth/register").post(s.value).json();l.value=!1,r.value=e.value,n.value&&(f.add({severity:"success",summary:"Success",detail:"Registration successful",life:3e3}),v.push({name:"login"}))}return(n,e)=>{const _=j,d=T,w=M,V=R,b=x;return p(),u("div",P,[t(b,{class:"w-80"},{title:m(()=>e[3]||(e[3]=[h(" Register ")])),content:m(()=>[a("div",U,[t(_,{error:r.value},null,8,["error"]),a("div",S,[e[4]||(e[4]=a("label",{class:""},"Name",-1)),t(d,{modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),a("div",I,[e[5]||(e[5]=a("label",{class:""},"Email",-1)),t(d,{modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.email=o),modelModifiers:{trim:!0},type:"email",fluid:""},null,8,["modelValue"])]),a("div",W,[e[6]||(e[6]=a("label",{class:""},"Password",-1)),t(w,{modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password=o),modelModifiers:{trim:!0},"toggle-mask":"",feedback:!1,fluid:""},null,8,["modelValue"]),s.value.password&&s.value.password.length<6?(p(),u("small",q," Password must contain at least 6 characters. ")):N("",!0)]),a("div",z,[t(V,{onClick:g,loading:l.value,disabled:c.value||l.value,label:"Register",icon:"pi pi-user-plus","icon-pos":"right",fluid:""},null,8,["loading","disabled"])])])]),_:1})])}}});export{O as default};
