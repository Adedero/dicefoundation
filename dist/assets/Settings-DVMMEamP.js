import{_ as E}from"./VPage.vue_vue_type_script_setup_true_lang-C4NydXBT.js";import{s as F}from"./index-DuOTc6ft.js";import{s as I}from"./index-D-JN0ZYy.js";import{$ as p,_ as N}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B4fsL62Q.js";import{d as P,u as U,h as D,r,i as R,c as x,w as h,a as s,b as f,k as Y,l as _,j as o,s as q,F as G,e as H,t as w,o as d,m as J}from"./index-Cjbmz-ZE.js";import"./index-93PTaMgM.js";const K={class:"flex justify-end"},O={key:1},Q={class:"w-full"},W={class:"grid gap-1 w-full"},X={class:"md:col-span-6 px-2 py-2 mt-10 rounded-md border border-neutral-200 dark:border-neutral-800"},Z={class:"flex items-center gap-2 justify-between"},ee={class:"flex items-center justify-center"},se={class:"mt-2 grid gap-2 grid-cols-2"},le={class:"mt-4 grid gap-2"},ae={class:"text-sm"},te={class:"font-semibold"},ie={class:"flex items-center gap-2"},ne=["href"],fe=P({__name:"Settings",async setup(oe){var g;let u,k;const m=U(),{data:L,error:b,execute:V}=([u,k]=D(()=>p("settings").json()),u=await u,k(),u),l=r(((g=L.value)==null?void 0:g[0])??{}),M=R(()=>{var t;return!l.value.emailAddress||!((t=l.value.socialMediaLinks)!=null&&t.length)}),v=r(!1),C=r();async function S(){J(v,C);const{data:t,error:e}=l.value.id?await p(`settings/${l.value.id}`).put({data:l.value}).json():await p("settings").post({data:l.value}).json();if(e.value){m.add({severity:"error",summary:"Error",detail:e.value.message,life:6e3});return}t.value&&(l.value=t.value,m.add({severity:"success",summary:"Saved",life:3e3}))}const a=r({label:"",link:""}),j=r(["Facebook","Instagram","LinkedIn","Pinterest","Snapchat","TikTok","Twitter","YouTube"]),$=()=>{var t,e;if(a.value.label&&a.value.link){if((e=(t=l.value)==null?void 0:t.socialMediaLinks)==null?void 0:e.find(c=>c.label===a.value.label||c.link===a.value.link)){m.add({severity:"warn",summary:"Duplicate link",life:5e3});return}l.value.socialMediaLinks=[...l.value.socialMediaLinks||[],a.value],a.value={label:"",link:""}}},T=t=>{var n;const e=t>0?1:void 0;l.value.socialMediaLinks=(n=l.value.socialMediaLinks)==null?void 0:n.splice(t,e)};return(t,e)=>{const n=q,c=N,y=I,A=F,B=E;return d(),x(B,{header:"Settings"},{actions:h(()=>[s("div",K,[o(n,{onClick:S,loading:v.value,label:"Save",disabled:v.value||M.value,icon:"pi pi-save"},null,8,["loading","disabled"])])]),default:h(()=>[s("div",null,[_(b)?(d(),x(c,{key:0,error:_(b),"should-retry":"",onRetry:_(V)},null,8,["error","onRetry"])):l.value?(d(),f("div",O,[s("div",Q,[s("div",W,[e[3]||(e[3]=s("label",{class:"text-sm font-medium"},"Contact Email Address",-1)),o(y,{modelValue:l.value.emailAddress,"onUpdate:modelValue":e[0]||(e[0]=i=>l.value.emailAddress=i),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),s("div",X,[s("div",Z,[e[4]||(e[4]=s("label",{class:"text-sm font-medium"}," Social Media Links ",-1)),s("div",ee,[o(n,{onClick:$,disabled:!a.value.label||!a.value.link,size:"small",icon:"pi pi-plus",rounded:""},null,8,["disabled"])])]),s("div",se,[s("div",null,[o(A,{options:j.value,modelValue:a.value.label,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.label=i),placeholder:"Platform",size:"small",fluid:""},null,8,["options","modelValue"])]),s("div",null,[o(y,{modelValue:a.value.link,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.link=i),placeholder:"www.example.com",size:"small",fluid:""},null,8,["modelValue"])])]),s("div",le,[(d(!0),f(G,null,H(l.value.socialMediaLinks,(i,z)=>(d(),f("div",{key:i.link,class:"flex items-center gap-2 justify-between flex-wrap border border-neutral-200 dark:border-neutral-800 rounded-md p-2"},[s("div",ae,[s("p",te,w(i.label),1),s("div",ie,[s("p",null,w(i.link),1),s("a",{href:i.link,target:"_blank",rel:"noopener noreferrer"},e[5]||(e[5]=[s("span",{class:"pi pi-external-link text-blue-800 hover:underline",style:{"font-weight":"600","font-size":"0.8rem"}},null,-1)]),8,ne)])]),o(n,{onClick:re=>T(z),icon:"pi pi-trash",rounded:"",text:"",severity:"danger"},null,8,["onClick"])]))),128))])])])])):Y("",!0)])]),_:1})}}});export{fe as default};
