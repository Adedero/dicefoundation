import{_ as se}from"./VPage.vue_vue_type_script_setup_true_lang-K2AxGuuA.js";import{s as ae}from"./index-BP83Aqle.js";import{_ as oe}from"./ImagePicker.vue_vue_type_script_setup_true_lang-CtnXt56_.js";import{s as ne}from"./index-C3EPZ_z-.js";import{s as ie,_ as de}from"./Deleter.vue_vue_type_script_setup_true_lang-C7zLzGUJ.js";import{s as ue}from"./index-XKGxpEsQ.js";import{s as re}from"./index-CIvaEE9c.js";import{s as me}from"./index-DbUABEl7.js";import{$ as U,_ as pe}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B43nygGB.js";import{d as ve,u as fe,q as ce,h as xe,r as m,v as N,i as ge,c,w as I,a as t,k as v,l as x,j as a,p as r,b as f,t as g,y as z,s as be,e as P,F as B,o as d,m as ye,n as ke,x as Ve}from"./index-WTmT20yY.js";import"./index-DYVb8g_1.js";import"./index-BMhA5Ota.js";const _e={class:"flex justify-end gap-3"},we={class:"grid md:grid-cols-6 gap-5"},Me={class:"flex flex-col gap-1 md:col-span-2"},Te={class:"flex flex-col gap-1 md:col-span-2"},Le={class:"flex flex-col gap-1 md:col-span-2"},Ue={class:"flex flex-col gap-1 md:col-span-2"},Ie={class:"flex flex-col gap-1 md:col-span-2"},Se={class:"flex flex-col gap-1 md:col-span-2"},Ce={class:"flex flex-col gap-1 h-60 md:h-auto md:row-span-2 md:col-span-2 lg:col-span-2"},$e={class:"flex flex-col gap-1 h-60 md:h-auto md:row-span-2 md:col-span-2 lg:col-span-2"},De={class:"flex flex-col gap-1 md:col-span-2"},Ee={class:"flex flex-col gap-1 md:col-span-2"},Fe={class:"flex flex-col gap-1 md:col-span-2"},je={class:"flex flex-col gap-1 md:col-span-2"},Ne={class:"text-sm font-medium"},ze={key:0},Pe={class:"flex flex-col gap-1 md:col-span-2"},Be={class:"text-sm font-medium"},Ge={key:0},Re={class:"flex flex-col gap-1 md:col-span-2"},He={class:"flex flex-col gap-1 md:col-span-2"},Oe={class:"flex flex-col gap-1 md:col-span-2"},Ae={class:"flex flex-col gap-1 md:col-span-2"},he={class:"text-sm font-medium"},qe={class:"flex flex-col gap-1 md:col-span-2"},Ye={class:"relative flex flex-col gap-1 md:col-span-2"},Je={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},Ke={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},Qe={class:"md:col-span-6 px-2 py-2 mt-10 rounded-md border border-neutral-200 dark:border-neutral-800"},We={class:"mt-2 grid gap-4 grid-cols-[repeat(auto-fill,minmax(120px,1fr))]"},Xe=["onClick"],Ze=["src"],el={class:"md:col-span-6 px-2 py-2 mt-10 rounded-md border border-neutral-200 dark:border-neutral-800"},ll={class:"flex items-center gap-2 justify-between"},tl={class:"flex items-center justify-center"},sl={class:"mt-2 grid gap-2 md:grid-cols-2"},al={class:"mt-4 grid gap-2"},ol={class:"text-sm"},nl={class:"font-semibold"},il={class:"flex items-center gap-2"},dl=["href"],wl=ve({__name:"Event",async setup(ul){var D;let b,S;const G=ce(),_=fe(),y=(D=G.params.id)==null?void 0:D.toString(),{data:w,error:C,execute:R}=y?([b,S]=xe(()=>U(`events/${y}`).json()),b=await b,S(),b):{data:null,error:null},l=m((w==null?void 0:w.value)??{}),H=m(l.value.bannerImage??""),p=m(l.value.gallery??[]);N(()=>l.value.title,o=>{o&&(l.value.slug=Ve(o))},{immediate:!0});const k=m(!1),$=m();async function O(){ye(k,$);const{data:o,error:e}=y?await U(`events/${y}`).put({data:l.value}).json():await U("events").post({data:l.value}).json();ke(k,$,e),o.value&&(l.value=o.value,_.add({severity:"success",summary:"Saved",life:3e3})),e.value&&_.add({severity:"error",summary:"Error",detail:e.value.message,life:6e3})}const A=ge(()=>!l.value.title||!l.value.slug||!l.value.venue||!l.value.description||!l.value.status||!l.value.bannerImage||!l.value.startDate||!l.value.startTime||l.value.featured===void 0||l.value.featured===null),n=m({label:"",link:""}),h=()=>{var o;if(n.value.label&&n.value.link){if((o=l.value.socialMediaLinks)==null?void 0:o.find(i=>i.label===n.value.label||i.link===n.value.link)){_.add({severity:"warn",summary:"Duplicate link",life:5e3});return}l.value.socialMediaLinks=[...l.value.socialMediaLinks||[],n.value],n.value={label:"",link:""}}},q=o=>{var i;const e=o>0?1:void 0;l.value.socialMediaLinks=(i=l.value.socialMediaLinks)==null?void 0:i.splice(o,e)},M=m(!1);function Y(o){l.value&&(l.value.bannerImage=o.url,M.value=!0)}function J(){l.value&&(l.value.bannerImage=H.value,M.value=!1)}const K=o=>{p.value.includes(o.url)||(p.value=[...p.value,o.url])},Q=o=>{p.value=p.value.filter(e=>e!==o)};N(p,o=>{o&&o.length?l.value.gallery=o:l.value.gallery=null});const W=m(["Facebook","Instagram","LinkedIn","Pinterest","Snapchat","TikTok","Twitter","YouTube"]);return(o,e)=>{const i=be,X=de,Z=pe,u=me,T=re,E=ue,V=ie,ee=ne,F=oe,le=ae,te=se;return d(),c(te,{header:l.value.title??"Event"},{actions:I(()=>[t("div",_e,[a(i,{onClick:O,loading:k.value,label:"Save",disabled:k.value||A.value,icon:"pi pi-save"},null,8,["loading","disabled"]),l.value.id?(d(),c(X,{key:0,onDone:e[0]||(e[0]=L=>o.$router.push({name:"events"})),id:l.value.id,route:"events"},null,8,["id"])):v("",!0)])]),default:I(()=>{var L;return[t("div",null,[x(C)?(d(),c(Z,{key:0,error:x(C),"should-retry":"",onRetry:x(R)},null,8,["error","onRetry"])):v("",!0),t("div",null,[t("div",we,[t("div",Me,[e[21]||(e[21]=t("label",{class:"text-sm font-medium"},[r(" Title "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(u,{modelValue:l.value.title,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.title=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Te,[e[22]||(e[22]=t("label",{class:"text-sm font-medium"},[r(" Slug "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(u,{modelValue:l.value.slug,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.slug=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Le,[e[23]||(e[23]=t("label",{class:"text-sm font-medium"},[r(" Featured "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(T,{modelValue:l.value.featured,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.featured=s),options:[!0,!1],fluid:""},null,8,["modelValue"])]),t("div",Ue,[e[24]||(e[24]=t("label",{class:"text-sm font-medium"},[r(" Status "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(T,{modelValue:l.value.status,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.status=s),options:["UPCOMING","ONGOING","PAST","CANCELLED"],fluid:""},null,8,["modelValue"])]),t("div",Ie,[e[25]||(e[25]=t("label",{class:"text-sm font-medium"},[r(" Venue "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(u,{modelValue:l.value.venue,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.venue=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Se,[e[26]||(e[26]=t("label",{class:"text-sm font-medium"},"Event Link (if online)",-1)),a(u,{modelValue:l.value.eventLink,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.eventLink=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ce,[e[27]||(e[27]=t("label",{class:"text-sm font-medium"},[r(" Description "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(E,{modelValue:l.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.description=s),modelModifiers:{trim:!0},fluid:"",class:"resize-none h-full"},null,8,["modelValue"])]),t("div",$e,[e[28]||(e[28]=t("label",{class:"text-sm font-medium"},"How to register",-1)),a(E,{modelValue:l.value.howToRegister,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.howToRegister=s),modelModifiers:{trim:!0},fluid:"",class:"resize-none h-full"},null,8,["modelValue"])]),t("div",De,[e[29]||(e[29]=t("label",{class:"text-sm font-medium"},"Registration Link",-1)),a(u,{modelValue:l.value.registrationLink,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.registrationLink=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ee,[e[30]||(e[30]=t("label",{class:"text-sm font-medium"},[r(" Start Date "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(V,{modelValue:l.value.startDate,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.startDate=s),dateFormat:"M dd, yy"},null,8,["modelValue"])]),t("div",Fe,[e[31]||(e[31]=t("label",{class:"text-sm font-medium"}," End Date ",-1)),a(V,{modelValue:l.value.endDate,"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.endDate=s),dateFormat:"M dd, yy"},null,8,["modelValue"])]),t("div",je,[t("label",Ne,[e[32]||(e[32]=r(" Start Time ")),l.value.startTime?(d(),f("span",ze,g(x(z)(l.value.startTime,"HH:mm aa")),1)):v("",!0),e[33]||(e[33]=t("span",{class:"text-red-500 font-medium"},"*",-1))]),a(V,{modelValue:l.value.startTime,"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.startTime=s),timeOnly:"",hourFormat:"12"},null,8,["modelValue"])]),t("div",Pe,[t("label",Be,[e[34]||(e[34]=r(" End Time ")),l.value.endTime?(d(),f("span",Ge,g(x(z)(l.value.endTime,"HH:mm aa")),1)):v("",!0)]),a(V,{modelValue:l.value.endTime,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.endTime=s),timeOnly:"",hourFormat:"12"},null,8,["modelValue"])]),t("div",Re,[e[35]||(e[35]=t("label",{class:"text-sm font-medium"}," Address ",-1)),a(u,{modelValue:l.value.address,"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.address=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",He,[e[36]||(e[36]=t("label",{class:"text-sm font-medium"}," City ",-1)),a(u,{modelValue:l.value.city,"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.city=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Oe,[e[37]||(e[37]=t("label",{class:"text-sm font-medium"}," Country ",-1)),a(u,{modelValue:l.value.country,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.country=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ae,[t("label",he," Price ("+g(l.value.currency)+")",1),a(ee,{modelValue:l.value.price,"onUpdate:modelValue":e[17]||(e[17]=s=>l.value.price=s),"max-fraction-digits":2,fluid:""},null,8,["modelValue"])]),t("div",qe,[e[38]||(e[38]=t("label",{class:"text-sm font-medium"}," Currency ",-1)),a(u,{modelValue:l.value.currency,"onUpdate:modelValue":e[18]||(e[18]=s=>l.value.currency=s),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),t("div",Ye,[e[39]||(e[39]=t("label",{class:"text-sm font-medium"},[r(" Banner Image "),t("span",{class:"text-red-500 font-medium"},"*")],-1)),a(F,{onSelect:Y}),t("div",Je,[t("div",Ke,[(L=l.value)!=null&&L.bannerImage?(d(),c(le,{key:0,src:l.value.bannerImage,fluid:"",preview:"",class:"w-full h-full","image-class":"w-full h-full object-cover"},null,8,["src"])):v("",!0)]),M.value?(d(),c(i,{key:0,onClick:J,label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):v("",!0)])]),t("div",Qe,[e[41]||(e[41]=t("label",{class:"text-sm font-medium"}," Event Gallery ",-1)),t("div",We,[(d(!0),f(B,null,P(p.value,s=>(d(),f("div",{key:s,class:"relative h-40 rounded-md overflow-hidden bg-neutral-200 dark:bg-neutral-800"},[t("div",{onClick:j=>Q(s),class:"absolute cursor-pointer left-0 top-0 w-full h-full transition-all group hover:bg-black/40 grid place-content-center"},[a(i,{severity:"danger",size:"small",icon:"pi pi-trash",class:"transition-all opacity-0 translate-y-10 group-hover:translate-y-0 group-hover:opacity-100"})],8,Xe),t("img",{src:s,class:"w-full h-full object-cover"},null,8,Ze)]))),128)),a(F,{onSelect:K},{default:I(()=>e[40]||(e[40]=[t("div",{class:"border-2 border-neutral-400 dark:border-neutral-700 border-dashed rounded-md h-40 flex items-center justify-center hover:bg-neutral-200 dark:hover:bg-neutral-800 cursor-pointer"},[t("i",{class:"pi pi-plus text-2xl text-neutral-400 dark:text-neutral-600"})],-1)])),_:1})])]),t("div",el,[t("div",ll,[e[42]||(e[42]=t("label",{class:"text-sm font-medium"}," Social Media Links ",-1)),t("div",tl,[a(i,{onClick:h,disabled:!n.value.label||!n.value.link,size:"small",icon:"pi pi-plus",rounded:""},null,8,["disabled"])])]),t("div",sl,[t("div",null,[a(T,{options:W.value,modelValue:n.value.label,"onUpdate:modelValue":e[19]||(e[19]=s=>n.value.label=s),placeholder:"Platform",size:"small",fluid:""},null,8,["options","modelValue"])]),t("div",null,[a(u,{modelValue:n.value.link,"onUpdate:modelValue":e[20]||(e[20]=s=>n.value.link=s),placeholder:"href e.g. www.facebook.com/event",size:"small",fluid:""},null,8,["modelValue"])])]),t("div",al,[(d(!0),f(B,null,P(l.value.socialMediaLinks,(s,j)=>(d(),f("div",{key:s.link,class:"flex items-center gap-2 justify-between flex-wrap border border-neutral-200 dark:border-neutral-800 rounded-md p-2"},[t("div",ol,[t("p",nl,g(s.label),1),t("div",il,[t("p",null,g(s.link),1),t("a",{href:s.link,target:"_blank",rel:"noopener noreferrer"},e[43]||(e[43]=[t("span",{class:"pi pi-external-link text-blue-800 hover:underline",style:{"font-weight":"600","font-size":"0.8rem"}},null,-1)]),8,dl)])]),a(i,{onClick:rl=>q(j),icon:"pi pi-trash",rounded:"",text:"",severity:"danger"},null,8,["onClick"])]))),128))])])])])])]}),_:1},8,["header"])}}});export{wl as default};
