import{_ as M}from"./VPage.vue_vue_type_script_setup_true_lang-D3aXKuuB.js";import{s as T}from"./index-CE-NW1yC.js";import{s as O}from"./index-DHJ_47cS.js";import{_ as R}from"./ImagePicker.vue_vue_type_script_setup_true_lang-BJYwXjIX.js";import{d as G,u as J,h as K,r as g,p as L,i as Q,c as i,w as H,a as o,j as u,b as W,k as d,l as P,s as X,o as l,m as Y,n as Z}from"./index-BernQVxA.js";import{_ as ee,$ as _}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-sh5mCXpp.js";import"./index-CDuATX9l.js";import"./index-CvyUCB5w.js";const te={class:"flex justify-end mt-6"},oe={key:0},ae={class:"grid md:grid-cols-3 gap-x-5 gap-y-16"},se={class:"relative grid gap-1"},ne={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},le={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},re={class:"relative grid gap-1"},ie={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},ue={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},de={class:"relative grid gap-1"},me={class:"absolute w-full -bottom-12 right-0 flex justify-between items-center gap-3"},ce={class:"w-10 aspect-square overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800"},ge={class:"mt-20"},ve={class:"grid gap-1"},pe={class:"mt-4 grid gap-1"},xe=G({__name:"HomePage",async setup(fe){var k,B,x,F,$,V,j;let v,b;const h=J(),{data:y,error:q}=([v,b]=K(()=>_("pages?where=title,home").json()),v=await v,b(),v),t=g(L(((k=y.value)==null?void 0:k[0])??{title:"home",content:{noBgImage:"",heroImage1:"",heroImage2:"",introduction:"",aboutDiceFoundation:""}})),N=g({noBgImage:((x=(B=t.value)==null?void 0:B.content)==null?void 0:x.noBgImage)??"",heroImage1:(($=(F=t.value)==null?void 0:F.content)==null?void 0:$.heroImage1)??"",heroImage2:((j=(V=t.value)==null?void 0:V.content)==null?void 0:j.heroImage2)??""}),n=g({noBgImage:!1,heroImage1:!1,heroImage2:!1}),p=g(!1),w=g(null),U=async()=>{Y(p,w);const{data:s,error:e}=t.value.id?await _(`pages/${t.value.id}`).put({data:t.value}).json():await _("pages").post({data:t.value}).json();if(Z(p,w,e),s.value){h.add({severity:"success",summary:"Success",detail:"Saved",life:3e3}),n.value.noBgImage=!1,n.value.heroImage1=!1,n.value.heroImage2=!1;return}e.value&&h.add({severity:"error",summary:"Error",detail:e.value.message,life:3e3})},A=Q(()=>{var s,e,r,m,c;return!((s=t.value.content)!=null&&s.noBgImage)||!((e=t.value.content)!=null&&e.introduction)||!((r=t.value.content)!=null&&r.heroImage1)||!((m=t.value.content)!=null&&m.heroImage2)||!((c=t.value.content)!=null&&c.aboutDiceFoundation)});function f(s,e){t.value.content&&(t.value.content[e]=s.url,n.value[e]=!0)}function I(s){t.value.content&&(t.value.content[s]=N.value[s],n.value[s]=!1)}return(s,e)=>{const r=X,m=R,c=O,S=T,E=M;return l(),i(E,{header:"Home Page"},{actions:H(()=>[o("div",te,[u(r,{onClick:U,loading:p.value,label:"Save",icon:"pi pi-save",disabled:p.value||A.value},null,8,["loading","disabled"])])]),default:H(()=>{var C,z,D;return[o("div",null,[u(ee,{error:P(q),shouldRetry:""},null,8,["error"]),P(y)?(l(),W("div",oe,[o("div",ae,[o("div",se,[e[8]||(e[8]=o("label",{class:"text-sm font-medium"},"Hero image 1 (no background)",-1)),u(m,{onSelect:e[0]||(e[0]=a=>f(a,"noBgImage"))}),o("div",ne,[o("div",le,[(C=t.value.content)!=null&&C.noBgImage?(l(),i(c,{key:0,src:t.value.content.noBgImage,preview:""},null,8,["src"])):d("",!0)]),n.value.noBgImage?(l(),i(r,{key:0,onClick:e[1]||(e[1]=a=>I("noBgImage")),label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):d("",!0)])]),o("div",re,[e[9]||(e[9]=o("label",{class:"text-sm font-medium"},"Hero image 2",-1)),u(m,{onSelect:e[2]||(e[2]=a=>f(a,"heroImage1"))}),o("div",ie,[o("div",ue,[(z=t.value.content)!=null&&z.heroImage1?(l(),i(c,{key:0,src:t.value.content.heroImage1,preview:""},null,8,["src"])):d("",!0)]),n.value.heroImage1?(l(),i(r,{key:0,onClick:e[3]||(e[3]=a=>I("heroImage1")),label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):d("",!0)])]),o("div",de,[e[10]||(e[10]=o("label",{class:"text-sm font-medium"},"Hero image 3",-1)),u(m,{onSelect:e[4]||(e[4]=a=>f(a,"heroImage2"))}),o("div",me,[o("div",ce,[(D=t.value.content)!=null&&D.heroImage2?(l(),i(c,{key:0,src:t.value.content.heroImage2,preview:""},null,8,["src"])):d("",!0)]),n.value.heroImage2?(l(),i(r,{key:0,onClick:e[5]||(e[5]=a=>I("heroImage2")),label:"File selected",size:"small",severity:"danger",icon:"pi pi-times-circle",class:"py-1"})):d("",!0)])])]),o("div",ge,[o("div",ve,[e[11]||(e[11]=o("label",{class:"text-sm font-medium"},"Introduction",-1)),u(S,{modelValue:t.value.content.introduction,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.content.introduction=a),modelModifiers:{trim:!0},rows:"4",fluid:"",class:"resize-none"},null,8,["modelValue"])]),o("div",pe,[e[12]||(e[12]=o("label",{class:"text-sm font-medium"},"About Dice Foundation",-1)),u(S,{modelValue:t.value.content.aboutDiceFoundation,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.content.aboutDiceFoundation=a),modelModifiers:{trim:!0},rows:"10",fluid:"",class:"resize-none"},null,8,["modelValue"])])])])):d("",!0)])]}),_:1})}}});export{xe as default};
