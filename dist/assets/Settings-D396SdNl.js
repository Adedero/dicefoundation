import{_ as z}from"./VPage.vue_vue_type_script_setup_true_lang-Dg0ne_pH.js";import{s as E}from"./index-Cn2AjgIx.js";import{s as I}from"./index-DU7ljs5M.js";import{$ as v,_ as N}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-Bz0-Ncgb.js";import{d as P,u as U,h as D,r,p as R,i as O,c as h,w,a as s,b as f,k as Y,l as _,j as o,s as q,F as G,e as H,t as L,o as d,m as J,n as K}from"./index-CC3Qq7Jz.js";import"./index-D50fu7dH.js";const Q={class:"flex justify-end"},W={key:1},X={class:"w-full"},Z={class:"grid gap-1 w-full"},ee={class:"md:col-span-6 px-2 py-2 mt-10 rounded-md border border-neutral-200 dark:border-neutral-800"},se={class:"flex items-center gap-2 justify-between"},le={class:"flex items-center justify-center"},ae={class:"mt-2 grid gap-2 grid-cols-2"},te={class:"mt-4 grid gap-2"},ie={class:"text-sm"},ne={class:"font-semibold"},oe={class:"flex items-center gap-2"},re=["href"],ke=P({__name:"Settings",async setup(de){var y;let u,k;const p=U(),{data:V,error:b,execute:M}=([u,k]=D(()=>v("settings").json()),u=await u,k(),u),l=r(R(((y=V.value)==null?void 0:y[0])??{})),C=O(()=>{var t;return!l.value.emailAddress||!((t=l.value.socialMediaLinks)!=null&&t.length)}),c=r(!1),g=r();async function j(){J(c,g);const{data:t,error:e}=l.value.id?await v(`settings/${l.value.id}`).put({data:l.value}).json():await v("settings").post({data:l.value}).json();if(K(c,g,e),e.value){p.add({severity:"error",summary:"Error",detail:e.value.message,life:6e3});return}t.value&&(l.value=t.value,p.add({severity:"success",summary:"Saved",life:3e3}))}const a=r({label:"",link:""}),S=r(["Facebook","Instagram","LinkedIn","Pinterest","Snapchat","TikTok","Twitter","YouTube"]),$=()=>{var t,e;if(a.value.label&&a.value.link){if((e=(t=l.value)==null?void 0:t.socialMediaLinks)==null?void 0:e.find(m=>m.label===a.value.label||m.link===a.value.link)){p.add({severity:"warn",summary:"Duplicate link",life:5e3});return}l.value.socialMediaLinks=[...l.value.socialMediaLinks||[],a.value],a.value={label:"",link:""}}},F=t=>{var n;const e=t>0?1:void 0;l.value.socialMediaLinks=(n=l.value.socialMediaLinks)==null?void 0:n.splice(t,e)};return(t,e)=>{const n=q,m=N,x=I,T=E,A=z;return d(),h(A,{header:"Settings"},{actions:w(()=>[s("div",Q,[o(n,{onClick:j,loading:c.value,label:"Save",disabled:c.value||C.value,icon:"pi pi-save"},null,8,["loading","disabled"])])]),default:w(()=>[s("div",null,[_(b)?(d(),h(m,{key:0,error:_(b),"should-retry":"",onRetry:_(M)},null,8,["error","onRetry"])):l.value?(d(),f("div",W,[s("div",X,[s("div",Z,[e[3]||(e[3]=s("label",{class:"text-sm font-medium"},"Contact Email Address",-1)),o(x,{modelValue:l.value.emailAddress,"onUpdate:modelValue":e[0]||(e[0]=i=>l.value.emailAddress=i),modelModifiers:{trim:!0},type:"text",fluid:""},null,8,["modelValue"])]),s("div",ee,[s("div",se,[e[4]||(e[4]=s("label",{class:"text-sm font-medium"}," Social Media Links ",-1)),s("div",le,[o(n,{onClick:$,disabled:!a.value.label||!a.value.link,size:"small",icon:"pi pi-plus",rounded:""},null,8,["disabled"])])]),s("div",ae,[s("div",null,[o(T,{options:S.value,modelValue:a.value.label,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.label=i),placeholder:"Platform",size:"small",fluid:""},null,8,["options","modelValue"])]),s("div",null,[o(x,{modelValue:a.value.link,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.link=i),placeholder:"www.example.com",size:"small",fluid:""},null,8,["modelValue"])])]),s("div",te,[(d(!0),f(G,null,H(l.value.socialMediaLinks,(i,B)=>(d(),f("div",{key:i.link,class:"flex items-center gap-2 justify-between flex-wrap border border-neutral-200 dark:border-neutral-800 rounded-md p-2"},[s("div",ie,[s("p",ne,L(i.label),1),s("div",oe,[s("p",null,L(i.link),1),s("a",{href:i.link,target:"_blank",rel:"noopener noreferrer"},e[5]||(e[5]=[s("span",{class:"pi pi-external-link text-blue-800 hover:underline",style:{"font-weight":"600","font-size":"0.8rem"}},null,-1)]),8,re)])]),o(n,{onClick:ue=>F(B),icon:"pi pi-trash",rounded:"",text:"",severity:"danger"},null,8,["onClick"])]))),128))])])])])):Y("",!0)])]),_:1})}}});export{ke as default};
